<html>
<head>
    <title>Retrotranslator</title>
</head>

<body>
<table border="0" width="98%">
    <tr>
        <td><h2>Retrotranslator</h2></td>
        <td width="125" align="left"><a href="http://sourceforge.net"><img
                src="http://sflogo.sourceforge.net/sflogo.php?group_id=153566&amp;type=2"
                width="125" height="37" border="0" alt="SourceForge.net Logo"/></a>
        </td>
    </tr>
</table>

<h4>Contents</h4>
<ol>
    <li><a href="#what">What is Retrotranslator?</a></li>
    <li><a href="#features">What Java 5.0 features are supported?</a></li>
    <li><a href="#commandline">How to use Retrotranslator from command line?</a></li>
    <li><a href="#ant">How to use Retrotranslator from Apache Ant?</a></li>
    <li><a href="#jit">How to use Just-in-Time Retrotranslator?</a></li>
    <li><a href="#supported">What Java 5.0 classes and methods are supported?</a></li>
    <li><a href="#extension">How to write an extension for Retrotranslator?</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="#license">License</a></li>
</ol>

<h4><a name="what">What is Retrotranslator?</a></h4>
<a href="http://sourceforge.net/projects/retrotranslator">Retrotranslator</a> is a Java bytecode transformer
that translates Java classes compiled with JDK 5.0 into classes that can be run on JVM 1.4.
Retrotranslator is a free, open-source software.

<h4><a name="features">What Java 5.0 features are supported?</a></h4>
<ul>
    <li>Generics (generic types)</li>
    <li>Annotations (metadata)</li>
    <li>Metadata and generics reflection</li>
    <li>Typesafe enums (enumerated types)</li>
    <li>Autoboxing/unboxing</li>
    <li>Enhanced for loop (for-each loop)</li>
    <li>Varargs (variable arguments)</li>
    <li>Static import</li>
    <li>Concurrency utilities</li>
    <li>Collections framework enhancements</li>
</ul>

<h4><a name="commandline">How to use Retrotranslator from command line?</a></h4>
<ol>
    <li><a href="http://sourceforge.net/project/showfiles.php?group_id=153566">Download</a>
        and unzip the binary distribution file <code>Retrotranslator-<i>n.n.n</i>-bin.zip</code>,
        where <i>n.n.n</i> is the latest Retrotranslator release number.
    </li>
    <li>
        Compile your classes with JDK 5.0 and put them into some directory, e.g. <code>myclasses</code>.
    </li>
    <li>
        Go to the unzipped directory <code>Retrotranslator-<i>n.n.n</i>-bin</code> and execute:<br>
        <code>java -jar retrotranslator-transformer-<i>n.n.n</i>.jar -srcdir myclasses</code>
    </li>
    <li>
        When running your application include <code>retrotranslator-runtime-<i>n.n.n</i>.jar</code>
        and <code>backport-util-concurrent.jar</code> into your classpath.<br>
    </li>
</ol>

<p>Full command line syntax:<br>
    <code>java -jar retrotranslator-transformer-<i>n.n.n</i>.jar
        -srcdir &lt;path&gt; [-destdir &lt;path&gt;] [-verbose] [-verify] [-classpath &lt;classpath&gt;]</code>
    <br>or<br>
    <code>java -cp retrotranslator-transformer-<i>n.n.n</i>.jar net.sf.retrotranslator.transformer.Retrotranslator
        -srcdir &lt;path&gt; [-destdir &lt;path&gt;] [-verbose] [-verify] [-classpath &lt;classpath&gt;]</code></p>
<table border="1" cellspacing="0" cellpadding="5">
    <tr><th>Option</th><th>Description</th><th>Required</th><th>Default</th></tr>
    <tr>
        <td>-srcdir</td>
        <td>Location of the class files compiled with JDK 5.0.</td>
        <td>Yes</td>
        <td>-</td>
    </tr>
    <tr>
        <td>-destdir</td>
        <td>Location to store the class files compatible with JVM 1.4.</td>
        <td>No</td>
        <td>Source directory</td>
    </tr>
    <tr>
        <td>-stripsign</td>
        <td>Asks the translator to strip signature (generics) information.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>-verbose</td>
        <td>Asks the translator for verbose output.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>-verify</td>
        <td>Asks the translator for warnings when references to unknown classes, methods, or fields are found.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>-classpath</td>
        <td>The classpath to use for verification (including <code>rt.jar</code> from JRE 1.4 and
            <code>retrotranslator-runtime-<i>n.n.n</i>.jar</code>).</td>
        <td>No</td>
        <td>Current classpath</td>
    </tr>
</table>

<h4><a name="ant">How to use Retrotranslator from <a href="http://ant.apache.org/">Apache Ant</a>?</a></h4>

<p>The distribution contains an integrated Ant task <code>net.sf.retrotranslator.transformer.RetrotranslatorTask</code>.
    It has the following syntax:</p>
<table border="1" cellspacing="0" cellpadding="5">
    <tr><th>Attribute</th><th>Description</th><th>Required</th><th>Default</th></tr>
    <tr>
        <td>srcdir</td>
        <td>Location of the class files compiled with JDK 5.0. Also you may use nested <code>src</code> elements.</td>
        <td>Yes</td>
        <td>-</td>
    </tr>
    <tr>
        <td>destdir</td>
        <td>Location to store the class files compatible with JVM 1.4.</td>
        <td>No</td>
        <td>Source directory</td>
    </tr>
    <tr>
        <td>stripsign</td>
        <td>Asks the translator to strip signature (generics) information.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>verbose</td>
        <td>Asks the translator for verbose output.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>verify</td>
        <td>Asks the translator for warnings when references to unknown classes, methods, or fields are found.</td>
        <td>No</td>
        <td>Off</td>
    </tr>
    <tr>
        <td>failonwarning</td>
        <td>Indicates whether the build will fail when there are verification warnings.</td>
        <td>No</td>
        <td>On</td>
    </tr>
    <tr>
        <td>classpath</td>
        <td>The classpath to use for verification (including <code>rt.jar</code> from JRE 1.4 and
            <code>retrotranslator-runtime-<i>n.n.n</i>.jar</code>).<br>You may use
            nested <code>classpath</code> elements as well.</td>
        <td>No</td>
        <td>Current classpath</td>
    </tr>
</table>

<h4><a name="jit">How to use Just-in-Time Retrotranslator?</a></h4>

<p>
    You do not necessarily need to translate all Java 5.0 classes before running them on Sun JVM 1.4.
    It is possible to perform translation only when JRE 1.4 is detected at runtime. Just do one of the following:
</p>
<ol>
    <li>
        If you want to run a jar file, execute:<br>
        <code>java -cp retrotranslator-transformer-<i>n.n.n</i>.jar
            net.sf.retrotranslator.transformer.JITRetrotranslator -jar &lt;jarfile&gt; [&lt;args...&gt;]</code>
    </li>
    <li>
        In you want to run a class from your classpath, execute:<br>
        <code>java -cp retrotranslator-transformer-<i>n.n.n</i>.jar:&lt;classpath&gt;
            net.sf.retrotranslator.transformer.JITRetrotranslator &lt;class&gt; [&lt;args...&gt;]</code>
    </li>
    <li>
        Simply call <code>JITRetrotranslator.install()</code> from some JVM 1.4 compatible class
        before Java 5.0 classes are loaded.
    </li>
</ol>

<h4><a name="supported">What Java 5.0 classes and methods are supported?</a></h4>
<table border="1" cellspacing="0" cellpadding="5">
    <tr><th>Package</th><th>Class</th><th>Methods</th><th>Compatibility notes</th></tr>
    <tr><td>java.lang.annotation</td><td>All classes</td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td>java.util.concurrent,<br>java.util.concurrent.atomic,<br>java.util.concurrent.locks</td>
        <td>Almost all classes</td><td>Almost all methods</td>
        <td><a href="http://www.mathcs.emory.edu/dcl/util/backport-util-concurrent/">Java 1.4 backport of JSR 166</a>
            is used
        </td></tr>
    <tr><td><code>java.io</code></td><td><code>Closeable</code></td><td><code>All methods</code></td><td>
            <code>new Closeable[...]</code> is replaced with <code>new Object[...]</code>
        </td></tr>
    <tr><td rowspan="18"><code>java.lang</code></td><td><code>Boolean</code></td><td><code>parseBoolean(String)</code>
    </td><td>&nbsp;</td></tr>
    <tr><td><code>Byte</code></td><td><code>valueOf(byte)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Character</code></td><td><code>valueOf(char)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Class</code></td><td>All methods (21 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>Deprecated</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>Double</code></td><td><code>valueOf(double)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Enum</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>Float</code></td><td><code>valueOf(float)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>IllegalStateException</code></td><td><code>IllegalStateException(String, Throwable),<br>
        IllegalStateException(Throwable)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Integer</code></td><td><code>valueOf(int)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Iterable</code></td><td>All methods</td><td>
        <code>new Iterable[...]</code> is replaced with <code>new Object[...]</code>
    </td></tr>
    <tr><td><code>Long</code></td><td><code>valueOf(long)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>Package</code></td><td>All methods (4 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>Short</code></td><td><code>valueOf(short)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>String</code></td><td><code>contains(CharSequence),<br> contentEquals(CharSequence),<br>
        replace(CharSequence, CharSequence)</code></td><td>&nbsp;</td></tr>
    <tr><td><code>StringBuilder</code></td><td>All methods</td><td><code>StringBuilder</code> is replaced with <code>StringBuffer</code></td></tr>
    <tr><td><code>SuppressWarnings</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>TypeNotPresentException</code></td><td>All methods</td><td>&nbsp;</td></tr>

    <tr><td rowspan="12"><code>java.lang.reflect</code></td><td><code>AnnotatedElement</code></td><td>All methods</td><td>
        <code>new AnnotatedElement[...]</code> is replaced with <code>new Object[...]</code>
    </td></tr>
    <tr><td><code>Constructor</code></td><td>All methods (11 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>Field</code></td><td>All methods (8 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>GenericArrayType</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>GenericDeclaration</code></td><td>All methods</td><td>
        <code>new GenericDeclaration[...]</code> is replaced with <code>new Object[...]</code>
    </td></tr>
    <tr><td><code>GenericSignatureFormatError</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>MalformedParameterizedTypeException</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>Method</code></td><td>All methods (14 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>ParameterizedType</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>Type</code></td><td>All methods</td><td>
        <code>new Type[...]</code> is replaced with <code>new Object[...]</code>
    </td></tr>
    <tr><td><code>TypeVariable</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>WildcardType</code></td><td>All methods</td><td>&nbsp;</td></tr>

    <tr><td ><code>java.math</code></td><td><code>BigDecimal</code></td><td>
        <code>BigDecimal(int), BigDecimal(long)</code></td><td>&nbsp;</td></tr>

    <tr><td rowspan="8"><code>java.util</code></td><td><code>AbstractQueue</code></td><td>All methods</td><td>
        &nbsp;</td></tr>
    <tr><td><code>Arrays</code></td><td>All methods (21 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>Collections</code></td><td>All methods (13 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>EnumMap</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>EnumSet</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>LinkedList</code></td><td>All methods (5 new!)</td><td>&nbsp;</td></tr>
    <tr><td><code>PriorityQueue</code></td><td>All methods</td><td>&nbsp;</td></tr>
    <tr><td><code>Queue</code></td><td>All methods</td><td>
        <code>new Queue[...]</code> is replaced with <code>new Object[...]</code>
    </td></tr>

    <tr><td><code>java.util.regex</code></td><td><code>Matcher</code></td><td><code>quoteReplacement(String)</code></td>
        <td>&nbsp;</td></tr>
</table>

<h4><a name="extension">How to write an extension for Retrotranslator?</a></h4>

<p>
    Since most backported classes are discovered by Retrotranslator at transformation time,
    you may write an extension and simply put it into Retrotranslator classpath to make it work.
    For example, <code>net.sf.retrotranslator.runtime.java.util.EnumSet_</code> is a backport of
    <code>java.util.EnumSet</code> and <code>net.sf.retrotranslator.runtime.java.lang._String</code>
    constains additional methods for <code>java.lang.String</code>. The additional methods should be
    <code>public static</code> and must accept an original class instance as the first argument
    if they replace instance methods. To include your code into Retrotranslator just send
    a <a href="http://sourceforge.net/tracker/?group_id=153566&atid=788281">patch</a> if you can release it under
    the <a href="#license">Retrotranslator license</a>. For more information see Retrotranslator source code.
</p>

<h4><a name="contact">Contact</a></h4>
<ul>
    <li><a href="http://retrotranslator.sourceforge.net/">Latest documentation</a></li>
    <li><a href="http://sourceforge.net/forum/forum.php?forum_id=513539">Open discussion</a></li>
    <li><a href="http://sourceforge.net/forum/forum.php?forum_id=513540">Help</a></li>
    <li><a href="http://sourceforge.net/tracker/?group_id=153566&atid=788279">Bugs</a></li>
    <li><a href="http://sourceforge.net/tracker/?group_id=153566&atid=788282">Feature requests</a></li>
    <li><a href="http://sourceforge.net/users/tarasp/">Author</a></li>
</ul>

<h4><a name="license">License</a></h4>
<pre>
    Copyright (c) 2005, 2006 Taras Puchko
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions
    are met:
    1. Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.
    2. Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.
    3. Neither the name of the copyright holders nor the names of its
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
    AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
    ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
    LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
    CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
    THE POSSIBILITY OF SUCH DAMAGE.
</pre>
</body>
</html>
